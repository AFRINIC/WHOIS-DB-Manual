<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c13{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:340.5pt;border-top-color:#808080;border-bottom-style:solid}.c40{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:375.5pt;border-top-color:#808080;border-bottom-style:solid}.c19{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:56.5pt;border-top-color:#808080;border-bottom-style:solid}.c17{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:351.4pt;border-top-color:#808080;border-bottom-style:solid}.c38{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:352.9pt;border-top-color:#808080;border-bottom-style:solid}.c23{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:32.4pt;border-top-color:#808080;border-bottom-style:solid}.c26{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:326.6pt;border-top-color:#808080;border-bottom-style:solid}.c18{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:84.2pt;border-top-color:#808080;border-bottom-style:solid}.c37{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:58.7pt;border-top-color:#808080;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:63pt;border-top-color:#808080;border-bottom-style:solid}.c32{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:50.6pt;border-top-color:#808080;border-bottom-style:solid}.c14{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:60.1pt;border-top-color:#808080;border-bottom-style:solid}.c8{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:64.5pt;border-top-color:#808080;border-bottom-style:solid}.c9{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:385pt;border-top-color:#808080;border-bottom-style:solid}.c33{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#808080;border-top-width:0pt;border-right-width:0pt;border-left-color:#808080;vertical-align:top;border-right-color:#808080;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:109pt;border-top-color:#808080;border-bottom-style:solid}.c20{color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c34{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c16{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c22{margin-left:36pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c5{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c21{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c12{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c24{margin-left:18pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c29{margin-left:54pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c2{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c25{padding-top:4pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c31{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c39{font-weight:700;vertical-align:baseline;font-size:23pt;font-family:"Arial";font-style:normal}.c44{padding-top:12pt;padding-bottom:12pt;line-height:1.15;text-align:center}.c30{border-spacing:0;border-collapse:collapse;margin-right:auto}.c15{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c7{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c42{padding-top:10pt;padding-bottom:4pt;line-height:1.0;text-align:left}.c45{padding-top:24pt;padding-bottom:6pt;line-height:1.15;text-align:left}.c46{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c1{color:inherit;text-decoration:inherit}.c47{font-weight:700;font-size:23pt}.c35{orphans:2;widows:2}.c43{height:92.5pt}.c4{height:52pt}.c11{page-break-after:avoid}.c6{height:38.5pt}.c27{height:11pt}.c3{height:25pt}.c36{height:79pt}.c41{height:77.5pt}.c10{height:65.5pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c46"><h1 class="c35 c45" id="h.xavh7c47dd03"><span class="c7 c47"><a class="c1" href="https://www.google.com/url?q=https://afrinic.net/support/whois/manual&amp;sa=D&amp;ust=1580379329005000">WHOIS DB - Reference Manual</a></span></h1><p class="c15 c35"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c2"><span class="c0">Reviewed for AFRINIC usage by: Adiel Akplogan</span></p><p class="c2"><span class="c0">Document ID: afsup-dbref200501-Draft</span></p><p class="c2"><span class="c0">Date: 20 January 2005</span></p><hr><p class="c12"><span class="c0"></span></p><p class="c2"><span class="c0">Abstract</span></p><p class="c2"><span>This document describes the functionality of the AFRINIC Database that uses the Routing Policy Specification Language (RPSL) [1] to represent all Database objects. Though this document tends to be self-contained, the reader is encouraged to read the RPSL [</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref1&amp;sa=D&amp;ust=1580379329006000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref1&amp;sa=D&amp;ust=1580379329006000">1</a></span><span class="c7">&nbsp;</span><span>] and RPSS [</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref2&amp;sa=D&amp;ust=1580379329007000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref2&amp;sa=D&amp;ust=1580379329007000">2</a></span><span class="c7">&nbsp;</span><span>] specifications for more detailed information, examples of usage and definitions. For a tutorial on RPSL, the reader should read the RPSL applications document [</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref3&amp;sa=D&amp;ust=1580379329007000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref3&amp;sa=D&amp;ust=1580379329008000">3</a></span><span class="c7">&nbsp;</span><span class="c0">]</span></p><hr><p class="c12"><span class="c0"></span></p><p class="c2"><span class="c0">Conventions used in this document</span></p><p class="c2"><span class="c0">Within this document, the following conventions are used:</span></p><p class="c2"><span class="c0">&lt;label&gt; indicates a placeholder or syntax specification [option] indicate an optional text or command argument.</span></p><p class="c2"><span class="c0">Please note that in object templates the square brackets &quot;[ ]&quot; are used to specify type of an attribute. &quot;attribute:&quot; indicates an attribute.</span></p><hr><p class="c12"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c35 c44"><span class="c16">Table of Contents</span></p><p class="c25"><span class="c16"><a class="c1" href="#h.xavh7c47dd03">WHOIS DB - Reference Manual</a></span><span class="c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c16"><a class="c1" href="#h.xavh7c47dd03">1</a></span></p><p class="c31"><span class="c16"><a class="c1" href="#h.29bpffxtkozu">1.0 Queries in the AFRINIC Database</a></span><span class="c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c16"><a class="c1" href="#h.29bpffxtkozu">4</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.ab0z3x4ipqd3">1.1 Queries using primary and lookup keys</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.ab0z3x4ipqd3">5</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.kveqqw5zsgsw">1.2 IP address lookups</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.kveqqw5zsgsw">5</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.uhizoj2m25yr">1.2.1 Default lookup for IP ranges in the AFRINIC Database</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.uhizoj2m25yr">6</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.8rmf6tf5c8yr">1.2.2 More and less specific queries</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.8rmf6tf5c8yr">6</a></span></p><p class="c29"><span class="c0"><a class="c1" href="#h.78tw1e9tt704">1.2.2.1 Less specific queries</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.78tw1e9tt704">7</a></span></p><p class="c29"><span class="c0"><a class="c1" href="#h.ye5g297zvzfg">1.2.2.2 More specific queries</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.ye5g297zvzfg">7</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.rk4lo97b3ok">1.3 Inverse queries</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.rk4lo97b3ok">7</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.tdzc8pz45l1n">1.4 Getting all the members of set objects</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.tdzc8pz45l1n">8</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.ikl8k1ytpv2i">1.5 More/less specific lookups for in-addr.arpa and ip6.arpa domains</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.ikl8k1ytpv2i">8</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.fh6tix3vg9yq">1.6 Referral mechanism for domains</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.fh6tix3vg9yq">8</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.ii6exz12h8wd">1.7 Access control for queries</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.ii6exz12h8wd">9</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.8ntj0diwnqj9">1.8 Other server features</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.8ntj0diwnqj9">10</a></span></p><p class="c31"><span class="c16"><a class="c1" href="#h.awpd4zhzhmw3">2.0 Updates in the AFRINIC Database</a></span><span class="c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c16"><a class="c1" href="#h.awpd4zhzhmw3">18</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.lybj9h6p0uul">2.1 Format of an update message</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.lybj9h6p0uul">18</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.m5290lxt7co1">2.2 Creating, modifying and deleting an object</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.m5290lxt7co1">19</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.kpz17xzg0e0q">2.2.1 Object processing</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.kpz17xzg0e0q">19</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.f4olreqk1ugv">2.2.2 Creating a new object</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.f4olreqk1ugv">20</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.y6r50w4ofxu9">2.2.3 Modifying an existing object</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.y6r50w4ofxu9">20</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.v1iucc9w4mzz">2.2.4 Deleting an object</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.v1iucc9w4mzz">20</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.6o5mm4f1gf2t">2.3 E-mail updates</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.6o5mm4f1gf2t">21</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.4nx7c911knny">2.3.1 MIME support</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.4nx7c911knny">21</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.maw7j0joq8tk">2.3.2 PGP support</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.maw7j0joq8tk">22</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.m6c99wtd35lf">2.3.3 Subject line processing</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.m6c99wtd35lf">22</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.wrcdysn4749k">2.4 Updates using network update utility</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.wrcdysn4749k">22</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.ogl14ebtz9w9">2.5 Acknowledgements and Notifications</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.ogl14ebtz9w9">22</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.tgb2n9ye5eyj">2.5.1 Acknowledgements</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.tgb2n9ye5eyj">22</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.f4pzyyo1wwfr">2.5.2 Notifications</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.f4pzyyo1wwfr">24</a></span></p><p class="c29"><span class="c0"><a class="c1" href="#h.t1bm1x162nz7">2.5.2.1 Normal notifications</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.t1bm1x162nz7">24</a></span></p><p class="c29"><span class="c0"><a class="c1" href="#h.rb21vtptgfqv">2.5.2.2 Forward messages</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.rb21vtptgfqv">24</a></span></p><p class="c29"><span class="c0"><a class="c1" href="#h.cvexbqz8hhlt">2.5.2.3 Cross notifications</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.cvexbqz8hhlt">24</a></span></p><p class="c24"><span class="c0"><a class="c1" href="#h.vpdfm9f3op1z">2.6 Data protection</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.vpdfm9f3op1z">25</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.tcopxpde4lyb">2.6.1 Authorisation model</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.tcopxpde4lyb">25</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.gyor19hrcmek">2.6.2 Protection of individual objects</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.gyor19hrcmek">27</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.9dhuw29183dy">2.6.3 Protection of aut-num object space</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.9dhuw29183dy">27</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.xis2qv5cmmbx">2.6.4 Protection of address space</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.xis2qv5cmmbx">27</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.xr6ofkxlqqzu">2.6.5 Protection of objects with hierarchical names</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.xr6ofkxlqqzu">27</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.759kbq8h37to">2.6.6 Protection of domain object space</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.759kbq8h37to">28</a></span></p><p class="c22"><span class="c0"><a class="c1" href="#h.urnlxjrvls35">2.6.7 Protecting membership of a set</a></span><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"><a class="c1" href="#h.urnlxjrvls35">28</a></span></p><p class="c35 c42"><span class="c16"><a class="c1" href="#h.djtt1e44am3z">3.0 Mirroring of the AFRINIC Database</a></span><span class="c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c16"><a class="c1" href="#h.djtt1e44am3z">28</a></span></p><p class="c12"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2"><span class="c16">Introduction &nbsp;</span></p><p class="c2"><span>The AFRINIC Network Management Database contains information about IP address space allocations and assignments. Routing registry in the AFRINIC region will be performed at this point by RIPE NCC.This Database does not contain any information about Domain Name. Please see the</span><span><a class="c1" href="https://www.google.com/url?q=https://www.iana.org/&amp;sa=D&amp;ust=1580379329028000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.iana.org/&amp;sa=D&amp;ust=1580379329028000">IANA</a></span><span class="c0">&nbsp;ccTLD Database for a full list of the ccTLD administrators.</span></p><p class="c2"><span>The information in the AFRINIC Database is available to the public for agreed Internet operation purposes, but is under copyright. Please see</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A3&amp;sa=D&amp;ust=1580379329029000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A3&amp;sa=D&amp;ust=1580379329029000">Appendix A3</a></span><span class="c0">&nbsp;&quot;Copyright information&quot;.</span></p><p class="c2"><span class="c0">The phrase &quot;AFRINIC Database&quot; is often used to refer to the interface software rather than the information that is stored in the database. In ambiguous situations, this reference manual will make clear what is being discussed.</span></p><p class="c2"><span>This document describes the functionality of AFRINIC database (bases on version 3.0 of the RIPE NCC WHOIS). This version uses the Routing Policy Specification Language (RPSL) [</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref1&amp;sa=D&amp;ust=1580379329030000">1</a></span><span class="c0">]. It also integrate the Routing Policy System Security(RPSS) [2] to provide authorization mechanisms to enable a higher level of security for the routing registry. Note that this last functionality is not yet used by AFRINIC.</span></p><p class="c2"><span>This document is self-contained. However, it does not contain examples of usage and illustrations of principles and concepts related to the AFRINIC Database functionality and implementation. The &quot;</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/196-afrinic-database-reference-manual&amp;sa=D&amp;ust=1580379329030000">AFRINIC Database User&#39;s Manual</a></span><span>&quot; [</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref5&amp;sa=D&amp;ust=1580379329030000">5</a></span><span>] and the &quot;AFRINIC Database Operations Manual&quot; [</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref5&amp;sa=D&amp;ust=1580379329031000">5</a></span><span>] will fill this gap and provide examples and detailed information on how to interact with the AFRINIC Database and how to configure and run AFRINIC Database server software. The reader is also encouraged to read the RPSL [</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref1&amp;sa=D&amp;ust=1580379329031000">1</a></span><span>] and RPSS [</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref2&amp;sa=D&amp;ust=1580379329032000">2</a></span><span>] specifications for more detailed information, examples of usage and definitions. For a tutorial on RPSL, the reader should read the RPSL applications document [</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref3&amp;sa=D&amp;ust=1580379329032000">3</a></span><span class="c0">].</span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp;</span></p><h1 class="c2 c11" id="h.29bpffxtkozu"><span class="c34">1.0 Queries in the AFRINIC Database</span></h1><p class="c2"><span>This section describes the functionality provided in the AFRINIC Database to enable users to retrieve database objects. Querying the database is done using a client who uses the Whois protocol [</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref12&amp;sa=D&amp;ust=1580379329033000">12</a></span><span class="c0">] to query and get the responses.</span></p><p class="c2"><span class="c0">This database incorporated mechanism to enable the whois server to automatically track query responses and limit the retrieval of contact information from the AFRINIC Database is also described in this section. The intention is to limit non-operational uses of the data (such as advertising) while permitting the operational uses of the database to be carried out.</span></p><p class="c2"><span class="c0">There is a set of general rules about server responses:</span></p><p class="c2"><span>* Output starting with the % sign is either a server response code or an informational message. A comment contains a white space after the % sign, while server messages start right after the % sign. Please see</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A2&amp;sa=D&amp;ust=1580379329034000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A2&amp;sa=D&amp;ust=1580379329034000">Appendix A2</a></span><span class="c0">&nbsp;&quot;AFRINIC Database response codes and messages&quot; for more information.</span></p><p class="c2"><span class="c0">* An empty line (&quot;\n\n&quot;) is an object delimiter.</span></p><p class="c2"><span class="c0">* Two empty lines mean the end of a server response.</span></p><p class="c2"><span>* When using the referral mechanism, the output of the referred server is passed to the client without modification. See section</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-&amp;sa=D&amp;ust=1580379329035000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-&amp;sa=D&amp;ust=1580379329035000">1.6&quot;Referral mechanism for domains&quot;</a></span><span class="c0">&nbsp;for more information.</span></p><p class="c2"><span class="c0">The general format of a query is:</span></p><p class="c2"><span class="c0">[-query_flags [query argument]] &lt;lookup-key&gt;</span></p><h2 class="c2 c11" id="h.ab0z3x4ipqd3"><span class="c21">1.1 Queries using primary and lookup keys &nbsp;</span></h2><p class="c2"><span>Normal queries are performed using primary and lookup keys as an argument to a query. These queries are presented in</span><span><a class="c1" href="https://www.google.com/url?q=https://afrinic.net/library/membership-documents/197-database-afrinic-database-reference-manual-%23table2&amp;sa=D&amp;ust=1580379329036000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://afrinic.net/library/membership-documents/197-database-afrinic-database-reference-manual-%23table2&amp;sa=D&amp;ust=1580379329036000">Table 1</a></span><span class="c7">&nbsp;</span><span>. Please refer to the document</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/219-objects-template&amp;sa=D&amp;ust=1580379329037000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/219-objects-template&amp;sa=D&amp;ust=1580379329037000">&quot;Object types in AFRINIC database &quot;</a></span><span class="c0">&nbsp;for primary and lookup keys definition for a class.</span></p><h2 class="c2 c11" id="h.kveqqw5zsgsw"><span class="c21">1.2 IP address lookups &nbsp;</span></h2><p class="c2"><span class="c0">Probably, the most important service provided by the AFRINIC Database is to provide information about IP networks in the Internet. This information is stored in the database in the form of inetnum.</span></p><p class="c2"><span class="c0">The inetnum and inet6num store information about ranges of IP addresses.</span></p><p class="c2"><span class="c0">For IPv4, the prefix is a 32-bit integer written in dotted quad notation and having the value of the lowest IP address in the range. The prefix length is an integer number in the range 0-32 (e.g. 193.0.0.0/22 specifies the range of 1024 IPv4 addresses starting with, and including, 193.0.0.0).</span></p><p class="c2"><span class="c0">The inetnum objects represent an IPv4 address space in range notation where the range is explicitly specified as two 32-bit integers written in dotted quad notation separated by a dash (&quot;-&quot;) (e.g. 93.0.0.0-193.0.3.255, which specifies the same range as above).</span></p><p class="c2"><span class="c0">When dealing with IPv6 address ranges, only the standard IPv6 prefix notation is allowed (prefix length must be in the range 0-128 and the prefix is a 128-bit integer, written in hexadecimal groups of 2 bytes separated by colons and with the possible use of shorthand notation for strings of consecutive 0s).</span></p><p class="c2"><span class="c0">When querying the database for information about a range of IP addresses, the user can use as search keys the following range notations:</span></p><p class="c2"><span class="c0">* a prefix, which has the same meaning as above;</span></p><p class="c2"><span class="c0">* an explicit range, also as above;</span></p><p class="c2"><span class="c0">* a single IP number, which when used as an argument to a query is interpreted as a range of exactly 1 address.</span></p><p class="c2"><span>These types of queries are presented in</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%23table2&amp;sa=D&amp;ust=1580379329039000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%23table2&amp;sa=D&amp;ust=1580379329039000">Table 2</a></span><span class="c7">&nbsp;</span><span class="c0">. The remainder of this section describes how a user can request different types of information to be returned, relative to a particular range of IP addresses.</span></p><p class="c2"><span class="c0">Before going into details, it is useful to define three concepts frequently used in this type of queries and which are defined relative to the user-specified (reference) range:</span></p><p class="c2"><span class="c0">* A less specific range is a range that contains the whole of the reference range and is bigger (contains more IP addresses) than the reference range.</span></p><p class="c2"><span class="c0">* A more specific range is a range contained within the reference range and contains less IP addresses than the reference range.</span></p><p class="c2"><span class="c0">* An exact match refers to a range that is identical to the reference range.</span></p><h3 class="c2 c11" id="h.uhizoj2m25yr"><span class="c5">1.2.1 Default lookup for IP ranges in the AFRINIC Database </span></h3><p class="c2"><span class="c0">When no flags are specified and the query key sent to the whois server is a range of IP addresses (either IPv4 or IPv6, expressed as a single IP address, two IP addresses separated by a hyphen (&quot;-&quot;) or a range of IP addresses in prefix notation), the AFRINIC whois server will try to find an exact match for that range.</span></p><p class="c2"><span class="c0">If an exact match is found, it is returned. If not, a lookup for the smallest less specific range is performed and this is returned.</span></p><h3 class="c2 c11" id="h.8rmf6tf5c8yr"><span class="c5">1.2.2 More and less specific queries </span></h3><p class="c2"><span class="c0">Sometimes the exact match is not the desired information. In that case there is a set of flags that modify the response of the whois server. This set of 4 flags (&quot;-M&quot;, &quot;-m&quot;, &quot;-L&quot; and &quot;-l&quot; ) provides two generic types of queries known as more and less specific queries.</span></p><h4 class="c2 c11" id="h.78tw1e9tt704"><span class="c20">1.2.2.1 Less specific queries </span></h4><p class="c2"><span class="c0">These refer to queries triggered by the use of the &quot;-l&quot; and &quot;-L&quot; flags. These queries will return information about ranges of IP addresses that fully contain the user-supplied range and may contain more addresses.</span></p><p class="c2"><span class="c0">The &quot;-L&quot; flag requests that the server return the exact match, if any, and all the objects containing information about IP ranges that are bigger than the user-supplied range and fully contain it.</span></p><p class="c2"><span class="c0">The &quot;-l&quot; flag requests that the server NOT return the exact match but only the smallest of the IP ranges that is bigger than the user-supplied range and that fully contains it. This is usually referred to as the one level less specific range.</span></p><h4 class="c2 c11" id="h.ye5g297zvzfg"><span class="c20">1.2.2.2 More specific queries </span></h4><p class="c2"><span class="c0">These refer to queries triggered by the use of the &quot;-m&quot; and &quot;-M&quot; flags. These queries will return information about ranges of IP addresses that are fully contained in the user-supplied range and contain fewer addresses.</span></p><p class="c2"><span class="c0">The &quot;-M&quot; flag requests that instead of returning the exact match, the server should return all the sub-ranges completely contained within the user-provided range no matter what their size is.</span></p><p class="c2"><span class="c0">The &quot;-m&quot; is the more specific equivalent of the &quot;-l&quot; flag. It requests that instead of returning the exact match, the server should return sub-ranges that are fully contained within the user-provided range. But instead of reporting all existing sub-ranges, it will only return the biggest ranges contained in the user range. These are usually called one level more specific.</span></p><h2 class="c2 c11" id="h.rk4lo97b3ok"><span class="c21">1.3 Inverse queries </span></h2><p class="c2"><span>Inverse queries are performed on inverse keys as defined in the AFRINIC Database object templates. For a complete listing of these templates, please refer to the document</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/219-objects-template&amp;sa=D&amp;ust=1580379329042000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/219-objects-template&amp;sa=D&amp;ust=1580379329043000">&quot;Object types in AFRINIC database&quot;</a></span><span class="c0">. By issuing this type of query, the client requests all objects that reference</span></p><p class="c2"><span class="c0">the object with the key specified as a query argument to be returned by the Database. One can also request an inverse query for several attributes (e.g. find out which objects reference a specific mntner object by &quot;mnt-by:&quot;, &quot;mnt-lower:&quot; attributes).</span></p><p class="c2"><span class="c0">In such case, the query flag should be represented by a comma-separated list of attributes to be searched. No white space is allowed in the list.</span></p><p class="c2"><span class="c0">Please refer to Table 4 for a complete list of supported inverse queries.</span></p><h2 class="c2 c11" id="h.tdzc8pz45l1n"><span class="c21">1.4 Getting all the members of set objects </span></h2><p class="c2"><span>In RPSL[</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref3&amp;sa=D&amp;ust=1580379329044000">3</a></span><span class="c0">] there are two ways in which an object can be a member of a set object.</span></p><p class="c2"><span>The first one is by listing objects in a &quot;members:&quot; attribute in the set object. This is the kind of member relationship present in &quot;Representation of IP Routing Policies in a Routing Registry&quot;[</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref4&amp;sa=D&amp;ust=1580379329044000">4</a></span><span class="c0">] (e.g. &quot;as-list:&quot; attribute in as-macro objects).</span></p><p class="c2"><span class="c0">The other way of specifying a membership relation is through the use of the &quot;member-of:&quot; attribute. This attribute can be used in the route, aut-num and inet-rtr classes. The value of the &quot;member-of:&quot; attribute identifies a set object that this object wants to be a member of.</span></p><p class="c2"><span class="c0">However, specifying member-of is not enough. The set object must also have a &quot;mbrs-by-ref:&quot; attribute listing the maintainer of the object wanting to be a member of the set. That is, the set owner must validate the membership claim of an object with a &quot;member-of:&quot; attribute, and it does that by matching the mnt-by line of the object with one of the maintainers in the &quot;mbrs-by-ref:&quot; attribute of the set object.</span></p><h2 class="c2 c11" id="h.ikl8k1ytpv2i"><span class="c21">1.5 More/less specific lookups for in-addr.arpa and ip6.arpa domains </span></h2><p class="c2"><span class="c0">AFRINIC Database supports IP lookups including the &quot;-x&quot;, &quot;-m&quot;, &quot;-M&quot;, &quot;-l&quot; and &quot;-L&quot; functionality for reverse delegation domains. To request that reverse delegation domains are to be looked up, use the &quot;-d&quot; flag in your Whois IP lookup query.</span></p><h2 class="c2 c11" id="h.fh6tix3vg9yq"><span class="c21">1.6 Referral mechanism for domains </span></h2><p class="c2"><span class="c0">The referral mechanism provides a way for administrators of domain registries to instruct the whois server to reply to the user by fetching data from the domain registry database rather than from local data. Its implementation consists of two different parts:</span></p><p class="c2"><span class="c0">1. Domain name stripping: When no matching domain object is found in the database with the name specified in the query, the domain name is stripped towards higher-level domains (xxx.yyy.zzz becoming yyy.zzz) and the lookup is repeated until a domain object is found or the search string becomes empty.</span></p><p class="c2"><span>For backwards compatibility, if the domain object found by domain stripping does not contain a &quot;refer:&quot; attribute, then it is considered that no objects are found and an appropriate message is displayed. Please see</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A2&amp;sa=D&amp;ust=1580379329046000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A2&amp;sa=D&amp;ust=1580379329046000">Appendix A2</a></span><span class="c0">&nbsp;&quot;AFRINIC Database response codes and messages&quot; for more information.</span></p><p class="c2"><span>2. The &quot;refer:&quot; attribute: The &quot;refer:&quot; attribute gives domain name administrators the possibility to point the whois server to an authoritative server for information about the domain name. This attribute specifies the hostname, port and referral type that the server should use to redirect the query. Please see</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A1&amp;sa=D&amp;ust=1580379329046000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A1&amp;sa=D&amp;ust=1580379329047000">Appendix A1</a></span><span class="c0">&nbsp;&quot;Object attributes&quot; for the syntax of this attribute.</span></p><p class="c2"><span class="c0">If a query to the whois server results in the retrieval of a local object that contains a &quot;refer:&quot; attribute, the server will connect to the remote server and issue a whois query for the requested domain name. Whatever is returned is then sent to the user. This mechanism is disabled by including the &quot;-R&quot; flag in the original query.</span></p><h2 class="c2 c11" id="h.ii6exz12h8wd"><span class="c21">1.7 Access control for queries </span></h2><p class="c2"><span class="c0">This section describes the mechanism for controlling how many database objects a particular whois client can retrieve from the whois server. The objective is to control and prevent abusive use of the Database done by systematic queries for contact information potentially used for non-agreed purposes (e.g. spam).</span></p><p class="c2"><span class="c0">Therefore, the access control system is limiting only the amount of contact information (number of person and role objects) that can be retrieved in a certain amount of time. No limitations exist on the number of other objects.</span></p><p class="c2"><span class="c0">However, one should keep in mind that many lookups for object types, other than person and role, also return contact information by default. To avoid being blocked in such cases, it is advisable to use the &quot;-r&quot; query flag.</span></p><p class="c2"><span>Every time a person or role object is retrieved, a counter is decreased. When it reaches zero, the query execution is aborted and the connection is terminated, displaying an error message to the client (see &quot;Access errors&quot; in</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A2&amp;sa=D&amp;ust=1580379329048000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A2&amp;sa=D&amp;ust=1580379329049000">Appendix A2</a></span><span class="c0">&nbsp;&quot;AFRINIC Database response codes and messages&quot;), also a counter of exceeds (denials) is incremented. The Database may limit the number of denials, after which the host is permanently blocked from access to the AFRINIC Database. The Database Administration may also block a client</span></p><p class="c2"><span class="c0">manually in case any abusive behaviour is discovered.</span></p><p class="c2"><span class="c0">The counter recovers in time. The host can resume querying contact information after the counter has recovered so that the host gets a non-zero limit for contacts next time. Accounting is based on the IP address of a client.</span></p><p class="c2"><span class="c0">The AFRINIC Database server provides a facility for proxy clients (for example, web servers running cgi interfaces to the AFRINIC Database) that allows accounting to be based not on the IP address of the proxy, but rather of the clients that use this proxy to query the AFRINIC Database. The &quot;-V&quot; flag supports this feature. In such case, the format of the query is as follows:</span></p><p class="c2"><span class="c0">-V &lt;version&gt;,&lt;ipv4-address&gt;</span></p><p class="c2"><span class="c0">where</span></p><p class="c2"><span class="c0">&lt;version&gt; is a client tag that usually represents the software version that the proxy uses;</span></p><p class="c2"><span class="c0">&lt;ipv4-address&gt; is the IPv4 address of the client that queries the Database using the proxy.</span></p><p class="c2"><span class="c0">Note that the proxy&#39;s IP address should be registered in the access control list of the AFRINIC Database. Please contact AFRINIC Database Administration if you need this option.</span></p><h2 class="c2 c11" id="h.8ntj0diwnqj9"><span class="c21">1.8 Other server features </span></h2><p class="c2"><span class="c0">The AFRINIC Database server supports the retrieval of certain information about itself and the data sets served using a &quot;-q&quot; query flag.</span></p><p class="c2"><span class="c0">The &quot;-q &quot; flag takes arguments that make the server reply with information that is not extracted from the Databases it serves but rather about the system setup. This flag can currently take two arguments:</span></p><p class="c2"><span class="c0">* version (usage: -q version). Display version information for the server software.</span></p><p class="c2"><span class="c0">* sources (usage: -q sources). List all available sources. The</span></p><p class="c2"><span class="c0">format of the output is:</span></p><p class="c2"><span class="c0">&lt; source&gt;:&lt;NRTM_protocol_version_#&gt;:&lt;mirroring&gt;:&lt;first&gt;-&lt;last&gt;</span></p><p class="c2"><span class="c0">Where</span></p><p class="c2"><span class="c0">&lt;source&gt; - is the string that identifies the Database</span></p><p class="c2"><span class="c0">(e.g. AFRINIC); &lt;NRTM_protocol_version_#&gt; identifies the version of the mirroring protocol.</span></p><p class="c2"><span class="c0">&lt;mirroring&gt; can take one of the following values:</span></p><p class="c2"><span class="c0">-- Y/N/X - can mirror/cannot mirror/obscured</span></p><p class="c2"><span class="c0">&lt;first&gt; is the lowest serial number available</span></p><p class="c2"><span class="c0">&lt;last&gt; is the most recent serial number available.</span></p><p class="c2"><span class="c0">The following semantics apply:</span></p><p class="c2"><span class="c0">Y:&lt;first&gt;-&lt;last&gt; mirroring allowed, serials from range first-last available.</span></p><p class="c2"><span class="c0">N:&lt;first&gt;-&lt;last&gt; mirroring not allowed for administrative reasons. Ask Database Administration for permission.</span></p><p class="c2"><span class="c0">N:0-&lt;last&gt; mirroring physically not possible (e.g. static snapshot of serial last).</span></p><p class="c2"><span class="c0">X:&lt;message&gt; no mirroring allowed. An explanation is given in the &lt;message&gt;.</span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2"><span class="c0">Tables 1 to 6 contain all query types supported by the AFRINIC Database:</span></p><p class="c2"><span class="c0">&nbsp;Table 1 &nbsp; &nbsp;Queries using primary and lookup keys</span></p><a id="t.fe80cef5a52e1e2d3e02dbcfd7055506cf14e71e"></a><a id="t.0"></a><table class="c30"><tbody><tr class="c3"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">Flag</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">Lookup Key(s)</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Effect</span></p></td></tr><tr class="c10"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt; (IPv4 address prefix, range or single address)</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns inetnum , route objects with exact match on the specified key. If the exact match does not exist, the objects with the smallest less specific match are returned. When a single address is specified, an inet-rtr object whose &quot;ifaddr:&quot; attribute matches the query argument is also returned.</span></p></td></tr><tr class="c4"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt; (IPv6 address or IPv6 prefix)</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns an inet6num object with exact match on a specified key. If the exact match does not exist, the object with the smallest less specific match is returned.</span></p></td></tr><tr class="c4"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;as-number&gt;</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns an aut-num object whose &quot;aut-num:&quot; attribute matches the query argument and an as-block object with the range containing the aut-num object, if it exists.</span></p></td></tr><tr class="c43"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;As-number&gt; - &lt;as-number&gt; (range of &lt;as-number&gt; separated by &quot;-&quot;)</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns an as-block object whose primary key defines a range that matches or fully contains the range specified in the query argument.</span></p></td></tr><tr class="c36"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;domain-name&gt;</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span>Returns domain and inet-rtr objects whose primary keys match the query argument. For domains, a referral query may be performed. In such case the actual query is performed by the referred server and the results are transparently passed to the client. See section</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-&amp;sa=D&amp;ust=1580379329060000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-&amp;sa=D&amp;ust=1580379329060000">2.7 &quot;Referral mechanism for domains&quot;</a></span><span class="c7">&nbsp;</span><span class="c0">for more information.</span></p></td></tr><tr class="c3"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;irt-name&gt;</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns an irt object whose primary key matches the query argument.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;Person-name&gt;</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all person and role objects whose &quot;person:&quot; or &quot;role:&quot; attributes contain the name specified in the query argument.</span></p></td></tr><tr class="c3"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;set-name&gt;</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns a set whose primary key matches the query argument.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;nic-handle&gt;</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns a person or role object whose &quot;nic-hdl:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;mntner-name&gt;</span></p></td><td class="c17" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns a mntner object whose primary key matches the query argument.</span></p></td></tr></tbody></table><p class="c2"><span class="c0">&nbsp;</span></p><p class="c2"><span class="c0">&nbsp;Table 2 &nbsp; &nbsp;IP address lookups</span></p><a id="t.f66fe149282f9d34fd282e6aa13a08cb25836b5a"></a><a id="t.1"></a><table class="c30"><tbody><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">Flag</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c2"><span class="c0">Lookup Key(s)</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c2"><span class="c0">Effect</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-l</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt;</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns first level less specific inetnum , inet6num or route objects, excluding exact matches.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-L</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt;</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all level less specific inetnum , inet6num or route objects, including exact matches.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-m</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt;</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns first level more specific inetnum , inet6num or route objects, excluding exact matches.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-M</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt;</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all level more specific inetnum , inet6num or route objects, excluding exact matches.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-x</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt;</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c2"><span class="c0">Requests that only an exact match on a prefix be performed. If no exact match is found, no objects are returned.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-d</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt;</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c2"><span class="c0">Enables lookups on reverse delegation domains. Can be used with &quot;-x&quot;, &quot;-m&quot;, &quot;-M&quot;, &quot;-l&quot; and &quot;-L&quot; flags.</span></p></td></tr><tr class="c36"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-c</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;ip-lookup&gt;</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c2"><span>Returns the smallest, less specific inetnum or inet6num object containing the reference to an irt object. The result of this lookup is an inetnum or inet6num object and referenced contacts, if name recursion is not disabled (&quot;-r&quot; flag). It does not contain the referenced irt object, nor contact information about the team. Please refer to</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref11&amp;sa=D&amp;ust=1580379329075000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23ref11&amp;sa=D&amp;ust=1580379329076000">[11]</a></span><span class="c7">&nbsp;</span><span class="c0">for more information about the irt object.</span></p></td></tr></tbody></table><p class="c2"><span class="c0">&nbsp;</span></p><p class="c2"><span class="c0">&nbsp;Table 3 &nbsp; &nbsp;Inverse queries</span></p><a id="t.c6837b3e6c09b77d3aa9ea2b7d9dd1c0d4241ddb"></a><a id="t.2"></a><table class="c30"><tbody><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">Flag</span></p><p class="c2"><span class="c0">(alternative form)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">Lookup Key(s)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Effect</span></p></td></tr><tr class="c10"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i ac</span></p><p class="c2"><span class="c0">(-i admin-c)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;nic-handle&gt; or</span></p><p class="c2"><span class="c0">&lt;person-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all objects whose &quot;admin-c:&quot; attributes match the query argument.</span></p></td></tr><tr class="c10"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i ah</span></p><p class="c2"><span class="c0">(-i author)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;nic-handle&gt; or</span></p><p class="c2"><span class="c0">&lt;person-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all limerick objects whose &quot;author-c:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c10"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i pn</span></p><p class="c2"><span class="c0">(-i person)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;nic-handle&gt; or</span></p><p class="c2"><span class="c0">&lt;person-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all objects whose &quot;admin-c:&quot;, &quot;tech-c:&quot;, &quot;zone-c:&quot;, &quot;author:&quot; or &quot;cross-nfy:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i ct</span></p><p class="c2"><span class="c0">(-I cross-mnt)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;mntner-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all route and aut-num objects whose &quot;cross-mnt:&quot; attributes matches the query argument.</span></p></td></tr><tr class="c10"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i cn</span></p><p class="c2"><span class="c0">(-i cross-nfy)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;nic-handle&gt; or</span></p><p class="c2"><span class="c0">&lt;person-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all route and aut-num objects whose &quot;cross-nfy:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c6"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i iy</span></p><p class="c2"><span class="c0">(-i irt-nfy)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;e-mail&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all irt objects whose &quot;irt-nfy:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i la</span></p><p class="c2"><span class="c0">(-I local-as)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;as-number&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all inet-rtr objects whose &quot;local-as:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c6"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i mi</span></p><p class="c2"><span class="c0">(-i mnt-irt)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;irt-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all inetnum and inet6num objects whose &quot;mnt-irt:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i mr</span></p><p class="c2"><span class="c0">(-i mbrs-by-ref)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;mntner-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all set objects ( as-set , route-set and rtr-set ) whose &quot;mbrs-by-ref:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c36"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i mo</span></p><p class="c2"><span class="c0">(-i member-of)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;set-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all objects whose &quot;member-of:&quot; attribute matches the query argument and their membership claim is validated by the &quot;mbrs-by-ref:&quot; attribute of the set. Absence of the &quot;mbrs-by-ref:&quot; attribute means that the membership is only defined by the &quot;members:&quot; attribute of the set.</span></p></td></tr><tr class="c6"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i mb</span></p><p class="c2"><span class="c0">(-i mnt-by)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;mntner-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all objects whose &quot;mnt-by:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i ml</span></p><p class="c2"><span class="c0">(-i mnt-lower)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;mntner-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all objects whose &quot;mnt-lower:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i mn</span></p><p class="c2"><span class="c0">(-i mnt-nfy)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;e-mail&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all mntner objects whose &quot;mnt-nfy:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i mu</span></p><p class="c2"><span class="c0">(-i mnt-routes)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;mntner-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all aut-num , inetnum and route objects whose &quot;mnt-routes:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c6"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i ny</span></p><p class="c2"><span class="c0">(-i notify)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;e-mail&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all objects whose &quot;notify:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i ns</span></p><p class="c2"><span class="c0">(-I nserver)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">or &nbsp;(IPv4/IPv6 address)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all domain objects whose &quot;nserver:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c6"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i or</span></p><p class="c2"><span class="c0">(-i origin)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;as-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all route objects whose &quot;origin:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i rb</span></p><p class="c2"><span class="c0">(-i referral-by)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;mntner-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all mntner objects whose &quot;referral-by:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i rz</span></p><p class="c2"><span class="c0">(-i rev-srv)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">or &nbsp;(IPv4/IPv6 address)</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all inetnum and inet6num objects whose &quot;rev-srv:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c4"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i sd</span></p><p class="c2"><span class="c0">(-i sub-dom)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;domain-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all domain objects whose &quot;sub-dom:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c10"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i tc</span></p><p class="c2"><span class="c0">(-i tech-c)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;nic-handle&gt; or</span></p><p class="c2"><span class="c0">&lt;person-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all objects whose &quot;tech-c:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c6"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i dt</span></p><p class="c2"><span class="c0">(-i upd-to)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;e-mail&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all mntner objects whose &quot;upd-to:&quot; attribute matches the query argument.</span></p></td></tr><tr class="c41"><td class="c8" colspan="1" rowspan="1"><p class="c2"><span class="c0">-i zc</span></p><p class="c2"><span class="c0">(-i zone-c)</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;nic-handle&gt; or</span></p><p class="c2"><span class="c0">&lt;person-name&gt;</span></p></td><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Returns all objects whose &quot;zone-c:&quot; attribute matches the query argument.</span></p></td></tr></tbody></table><p class="c2"><span class="c0">&nbsp;Table 4 &nbsp; &nbsp;Query support for tools</span></p><a id="t.c3c251c77bef01db697e90c38d647947f04575ff"></a><a id="t.3"></a><table class="c30"><tbody><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">Flag</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c2"><span class="c0">Lookup Key(s)</span></p></td><td class="c40" colspan="1" rowspan="1"><p class="c2"><span class="c0">Effect</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-F</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c40" colspan="1" rowspan="1"><p class="c2"><span class="c0">Produces output using shorthand notation for attribute names. Produces slower responses.</span></p></td></tr><tr class="c4"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-K</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c40" colspan="1" rowspan="1"><p class="c2"><span class="c0">Requests that only the primary keys of an object be returned. The exceptions are set objects, where the &quot;members:&quot; attributes will also be returned. This flag does not apply to person and role objects.</span></p></td></tr><tr class="c43"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-k</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c2"><span class="c0">(optional normal query)</span></p></td><td class="c40" colspan="1" rowspan="1"><p class="c2"><span class="c0">Requests a persistent connection. After returning the result, the connection will not be closed by the server and a client may issue multiple queries on the same connection. Note that the server implements a &quot;stop-and-wait&quot; protocol, where no next query can be sent before receiving a reply for the previous one. Use RIPE whois client to be able to send queries in batch mode. Except the first &quot;-k query&quot;, &nbsp;&quot;-k&quot; without an argument closes the persistent connection.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-g</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c2"><span class="c0">(mirroring request)</span></p></td><td class="c40" colspan="1" rowspan="1"><p class="c2"><span>Request a NRTM stream from the server. See section</span><span><a class="c1" href="https://www.google.com/url?q=https://www.ripe.net/ripe/docs/databaseref-manual.html%234.0&amp;sa=D&amp;ust=1580379329112000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.ripe.net/ripe/docs/databaseref-manual.html%234.0&amp;sa=D&amp;ust=1580379329113000">4.0 &quot;Mirroring of the RIPE Database&quot;</a></span><span class="c7">&nbsp;</span><span class="c0">for more information.</span></p></td></tr></tbody></table><p class="c2"><span class="c0">Table 5 &nbsp; &nbsp;Miscellaneous queries</span></p><a id="t.014f527a7630fda69c537b8aa40e526cdfa56ddd"></a><a id="t.4"></a><table class="c30"><tbody><tr class="c3"><td class="c23" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">Flag</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c15"><span class="c0">Argument</span></p></td><td class="c26" colspan="1" rowspan="1"><p class="c2"><span class="c0">Effect</span></p></td></tr><tr class="c10"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-R</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c26" colspan="1" rowspan="1"><p class="c2"><span class="c0">Switches off use of the referral mechanism for domain lookups, so that the database returns an object in the RIPE database with the exact match with the lookup argument, rather than doing a referral lookup.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-r</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c26" colspan="1" rowspan="1"><p class="c2"><span class="c0">Switches off recursion for contact information after retrieving the objects that match the lookup key.</span></p></td></tr><tr class="c10"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-T</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c2"><span class="c0">(comma separated list of object types, no white space is allowed)</span></p></td><td class="c26" colspan="1" rowspan="1"><p class="c2"><span class="c0">Restricts the types of objects to lookup in the query.</span></p></td></tr><tr class="c6"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-a</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c26" colspan="1" rowspan="1"><p class="c2"><span class="c0">Specifies that the server should perform lookups in all available sources. See also &quot;-q sources&quot; query.</span></p></td></tr><tr class="c10"><td class="c23" colspan="1" rowspan="1"><p class="c2"><span class="c0">-s</span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c2"><span class="c0">(comma separated list of sources, no white space is allowed)</span></p></td><td class="c26" colspan="1" rowspan="1"><p class="c2"><span class="c0">Specifies which sources and in which order are to be looked up when performing a query.</span></p></td></tr></tbody></table><p class="c2"><span class="c0">Table 6 &nbsp; &nbsp;Informational queries</span></p><a id="t.ae95169b24dc8201c62bdb32bf34b1df3505288d"></a><a id="t.5"></a><table class="c30"><tbody><tr class="c3"><td class="c19" colspan="1" rowspan="1"><p class="c2"><span class="c0">Flag</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c2"><span class="c0">Argument</span></p></td><td class="c38" colspan="1" rowspan="1"><p class="c2"><span class="c0">Effect</span></p></td></tr><tr class="c4"><td class="c19" colspan="1" rowspan="1"><p class="c2"><span class="c0">-q</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c2"><span class="c0">sources</span></p></td><td class="c38" colspan="1" rowspan="1"><p class="c2"><span>Returns the current set of sources along with the information required for mirroring. See section</span><span><a class="c1" href="https://www.google.com/url?q=https://www.ripe.net/ripe/docs/databaseref-manual.html%232.9&amp;sa=D&amp;ust=1580379329122000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.ripe.net/ripe/docs/databaseref-manual.html%232.9&amp;sa=D&amp;ust=1580379329123000">2.9 &quot;Other server features&quot;</a></span><span class="c7">&nbsp;</span><span class="c0">for more information.</span></p></td></tr><tr class="c3"><td class="c19" colspan="1" rowspan="1"><p class="c2"><span class="c0">-q</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c2"><span class="c0">version</span></p></td><td class="c38" colspan="1" rowspan="1"><p class="c2"><span class="c0">Displays the current version of the server.</span></p></td></tr><tr class="c6"><td class="c19" colspan="1" rowspan="1"><p class="c2"><span class="c0">-t</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;object-type&gt;</span></p></td><td class="c38" colspan="1" rowspan="1"><p class="c2"><span class="c0">Requests a template for the specified object type.</span></p></td></tr><tr class="c4"><td class="c19" colspan="1" rowspan="1"><p class="c2"><span class="c0">-V&lt;client-tag&gt;</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c15 c35"><span class="c0">&nbsp;</span></p></td><td class="c38" colspan="1" rowspan="1"><p class="c2"><span class="c0">Sends information about the client to the server.</span></p></td></tr><tr class="c6"><td class="c19" colspan="1" rowspan="1"><p class="c2"><span class="c0">-v</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c2"><span class="c0">&lt;object-type&gt;</span></p></td><td class="c38" colspan="1" rowspan="1"><p class="c2"><span class="c0">Requests a verbose template for the specified object type.</span></p></td></tr></tbody></table><p class="c2"><span class="c0">The following notations are used in this table:</span></p><p class="c2"><span class="c0">&lt;object-type&gt; means full or abbreviated name of a specific class;</span></p><p class="c2"><span class="c0">&lt;client-tag&gt; is a string without a white space that usually bears the name of the client&#39;s software.</span></p><p class="c2"><span>Please refer to section</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%2317&amp;sa=D&amp;ust=1580379329129000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%2317&amp;sa=D&amp;ust=1580379329129000">2.8 &quot;Access control for queries&quot;</a></span><span class="c0">&nbsp;for more information about using this flag for proxy clients. Other notations are explained in Table A1.</span></p><h1 class="c2 c11" id="h.awpd4zhzhmw3"><span class="c34">2.0 Updates in the AFRINIC Database </span></h1><p class="c2"><span class="c0">To create a new object, update an existing one, or delete an object from the AFRINIC Database, an update message should be sent to the Database for processing. Two types of submissions are possible:</span></p><p class="c2"><span class="c0">* Updates via e-mail which is the main public interface, and on-line;</span></p><p class="c2"><span class="c0">* Updates via &quot;network update&quot; interface. This method is internal, and is only used from authorised nodes; typically, nodes belonging to the internal office LAN of the AFRINIC.</span></p><h2 class="c2 c11" id="h.lybj9h6p0uul"><span class="c21">2.1 Format of an update message </span></h2><p class="c2"><span>If sending the message via e-mail, the message may also be a MIME encoded message. The update is normally in plain text. In the former case, each valid MIME part is treated as a separate message. The update message may contain more than one object. Please see section</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%23231&amp;sa=D&amp;ust=1580379329130000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%23231&amp;sa=D&amp;ust=1580379329131000">2.3.1 &quot;MIME support&quot;</a></span><span class="c0">&nbsp;for more information.</span></p><p class="c2"><span class="c0">In an update message an object should be textually represented as a list of attribute-value pairs. Each attribute-value pair is written on a separate line. The attribute name starts at column 0, followed by character &quot;:&quot; and followed by the value of the attribute. The attribute, which has the same name as the object&#39;s class, should be specified first. An attribute&#39;s value can be split over multiple lines, by having a space, a tab or a plus (&quot;+&quot;)</span></p><p class="c2"><span class="c0">character as the first character of the continuation lines. The character &quot;+&quot; for line continuation allows attribute values to contain blank lines. More spaces may optionally be used after the continuation character to increase readability. The order of attribute-value pairs is significant. No empty attributes (an attribute with empty value) are allowed, unless the type of an attribute value is &lt;free-form&gt;. Object definition starts with the</span></p><p class="c2"><span class="c0">class attribute and ends with the first blank line (&quot;\n\n&quot;). No blank lines are allowed within the object.</span></p><p class="c2"><span class="c0">An object&#39;s definition may contain comments. A comment can be anywhere in an bject&#39;s definition, it starts at the first &quot;#&quot; character on a line and ends at the first end-of-line character. A comment cannot start at column 0. White space characters can be used to improve readability.</span></p><p class="c2"><span>For more information on the format of the objects, please see document &quot;</span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/219-objects-template&amp;sa=D&amp;ust=1580379329132000">AFRINIC Database bjects and attributes</a></span><span class="c0">&quot;.</span></p><p class="c2"><span class="c0">Each part of the message that is not recognised as a database object is ignored and the error message is issued in the acknowledgement.</span></p><h2 class="c2 c11" id="h.m5290lxt7co1"><span class="c21">2.2 Creating, modifying and deleting an object </span></h2><p class="c2"><span class="c0">To create, update or delete objects, a message containing the objects should be prepared following object templates and sent to the database for processing. One message may contain several objects, each of them may require different operation: creation, modification or deletion.</span></p><h3 class="c2 c11" id="h.kpz17xzg0e0q"><span class="c5">2.2.1 Object processing </span></h3><p class="c2"><span class="c0">As a general rule, the order of objects in the message is not changed. The database processes objects one by one, so it is the user&#39;s responsibility to ensure that all references can be resolved. The only exception is related to using &quot;AUTO&quot; NIC handles for automatic assignment of a value for the &quot;nic-hdl:&quot; attribute in the person or role objects. In such cases, objects with &quot;AUTO&quot; NIC handles are processed before any other object that can reference them is processed.</span></p><p class="c2"><span class="c0">While processing an object, the server performs the following checks:</span></p><p class="c2"><span class="c0">* Verifies that the syntax of an object is correct.</span></p><p class="c2"><span class="c0">* Verifies that the object passes authorisation checks.</span></p><p class="c2"><span class="c0">* Verifies that all references can be resolved without conflicts.</span></p><p class="c2"><span class="c0">* Verifies that the operation does not compromise referential integrity. This is performed for the deletion of an object to ensure that it is not referenced from any other object in the AFRINIC Database.</span></p><p class="c2"><span class="c0">* Verifies that the requested NIC handle is not in use and can be allocated. This is performed only for the creation of person or role objects that request a particular NIC handle.</span></p><p class="c2"><span class="c0">If all checks were passed successfully, the server creates the object in the AFRINIC Database. If one of these steps fails, the operation fails for the object. This is reflected in the acknowledgement message and, under certain conditions, in notification messages.</span></p><p class="c2"><span class="c0">After the database finishes processing the whole message, an acknowledgement message is composed and sent to the sender of the original update as specified in the &quot;Reply-to:&quot; field or &quot;From:&quot; field in the update message, if &quot;Reply-to:&quot; was not specified.</span></p><p class="c2"><span>Also in some cases, notification messages are sent. Please see section</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%23252&amp;sa=D&amp;ust=1580379329134000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%23252&amp;sa=D&amp;ust=1580379329135000">2.5.2 Notifications</a></span><span class="c0">&quot; for more information.</span></p><h3 class="c2 c11" id="h.f4olreqk1ugv"><span class="c5">2.2.2 Creating a new object &nbsp;</span></h3><p class="c2"><span class="c0">If an object with the same primary keys as the object in the update message does not exist in the database, the assumed operation is object creation. For person and role objects creation, one can use &quot;AUTO NIC handles&quot;, requesting the server to automatically assign a NIC handle. In such case, the value of the &quot;nic-hdl:&quot; attribute should be:</span></p><p class="c2"><span class="c0">nic-hdl: AUTO-1[&lt;initials&gt;]</span></p><p class="c2"><span class="c0">If the &lt;initials&gt; (2 to 4 characters) are specified, then the server will try to use them for constructing the NIC handle. If the &lt;initials&gt; are omitted, the server will guess the initials from the &quot;person:&quot; or &quot;role:&quot; attribute.</span></p><h3 class="c2 c11" id="h.y6r50w4ofxu9"><span class="c5">2.2.3 Modifying an existing object </span></h3><p class="c2"><span class="c0">If an object with the same primary keys as the object in the update message already exists in the database, the assumed operation is object modification. The server compares the old and new versions of the object and reports a no-operation error if they are identical. When comparing the versions, white space characters are not considered.</span></p><h3 class="c2 c11" id="h.v1iucc9w4mzz"><span class="c5">2.2.4 Deleting an object </span></h3><p class="c2"><span class="c0">The object deletion is requested by adding a special attribute &quot;delete:&quot; to the object:</span></p><p class="c2"><span class="c0">delete: &lt;comment&gt;</span></p><p class="c2"><span class="c0">The deletion is only accepted if the object in the message is exactly the same as the one in the database about to be deleted. When comparing the versions, white space characters are not considered. Also, operation cannot succeed if the object is referenced from any other objects in the Database.</span></p><h2 class="c2 c11" id="h.6o5mm4f1gf2t"><span class="c21">2.3 E-mail updates </span></h2><p class="c2"><span class="c0">A mail message containing an update should be sent to the e-mail address of the AFRINIC Database robot: auto-dbm@AFRINIC.net. After processing the message, an acknowledgement is sent back to the user, containing information about which object updates succeeded and which failed, along with the reason for failure. In some cases notification messages are sent to relevant users. Please see section 3.5.2 &quot;Notifications&quot; for more information.</span></p><h3 class="c2 c11" id="h.4nx7c911knny"><span class="c5">2.3.1 MIME support </span></h3><p class="c2"><span class="c0">The Database software supports MIME. This feature is meant mainly to make the cryptographic signing of the message easier when using mail agents that place the signature in a separate MIME part, not included in the body of the message.</span></p><p class="c2"><span class="c0">It also allows the definition of scopes of authorisation within the message (e.g. parts where different passwords apply) and nested signing of messages which may be necessary under some conditions when updating objects whose authorisation must be derived from more than one party.</span></p><p class="c2"><span class="c0">The following rules apply when submitting updates using MIME encapsulation.</span></p><p class="c2"><span class="c0">A. The software recognises the following headers and appropriate actions are taken:</span></p><p class="c2"><span class="c0">* multipart/signed</span></p><p class="c2"><span class="c0">* multipart/alternative</span></p><p class="c2"><span class="c0">* multipart/mixed</span></p><p class="c2"><span class="c0">* multipart/unknown</span></p><p class="c2"><span class="c0">* application/pgp-signature</span></p><p class="c2"><span class="c0">* text/plain</span></p><p class="c2"><span class="c0">All other content-types are treated as text/plain.</span></p><p class="c2"><span class="c0">B. Each MIME part is treated as a separate message with the following implications:</span></p><p class="c2"><span class="c0">* Authorisation information is valid only within a single part, except for MAIL-FROM type, which is valid across the entire message.</span></p><p class="c2"><span class="c0">* AUTO NIC handle assignment is made only within a single part (see next section 2.3.2 &quot;PGP support&quot;).</span></p><h3 class="c2 c11" id="h.maw7j0joq8tk"><span class="c5">2.3.2 PGP support </span></h3><p class="c2"><span class="c0">The Database supports PGP-signed messages. The following rules apply when submitting updates using this authorisation scheme.</span></p><p class="c2"><span class="c0">When using MIME encapsulation a PGP-signed portion of an update message should be submitted using multipart/signed composite type. In this case the first body part contains the update message (which may also be a MIME encapsulated message), and the second body contains a PGP-signature encapsulated with application/pgp-signature MIME discrete type. Regarding AUTO NIC handle assignment, the PGP-signed portion is treated as a separate message. If one of the signatures fails in a nested signed portion, the whole portion is rejected.</span></p><h3 class="c2 c11" id="h.m6c99wtd35lf"><span class="c5">2.3.3 Subject line processing </span></h3><p class="c2"><span class="c0">The three keywords valid in a subject line of an update message are NEW, HELP and HOWTO. Use NEW keyword by itself if you want the database to only accept new objects. HOWTO and HELP keywords can be used to get a help text that contains information about how to query and update the database (in this case the body of the message is ignored). If there is more than one keyword or there is a non-keyword in the subject line, then all the subject line is ignored.</span></p><h2 class="c2 c11" id="h.wrcdysn4749k"><span class="c21">2.4 Updates using network update utility </span></h2><p class="c2"><span class="c0">No MIME encapsulation is possible when using network update. No PGP authentication is possible when using network update.</span></p><h2 class="c2 c11" id="h.ogl14ebtz9w9"><span class="c21">2.5 Acknowledgements and Notifications </span></h2><h3 class="c2 c11" id="h.tgb2n9ye5eyj"><span class="c5">2.5.1 Acknowledgements &nbsp;</span></h3><p class="c2"><span class="c0">Processing of every valid object in the submission message (that is every object in plain text parts, supported MIME parts and/or valid PGP signed portions) is reflected in the acknowledgement message. This message contains information about whether the creation, modification or deletion has been successful or not. When there is a MIME part with an unsupported type in the incoming message, a warning will be added to the acknowledgement, saying that that MIME part is ignored. The acknowledgement message is sent back to the sender&#39;s e-mail address (&quot;Reply-To:&quot; or &quot;From:&quot;, if the former is not specified).</span></p><p class="c2"><span class="c0">The acknowledgement message starts with the header of the original update message as a quotation followed by the results of the updates performed for every valid object of the message.</span></p><p class="c2"><span class="c0">The format of a successful operation report is:</span></p><p class="c2"><span class="c0">&lt;operation_name&gt; OK: [ &lt;object_type&gt; ] &lt;object_key&gt;</span></p><p class="c2"><span class="c0">where</span></p><p class="c2"><span class="c0">&lt;operation_name&gt; may be New, Update, Delete, depending on the operation performed.</span></p><p class="c2"><span class="c0">&lt;object_type&gt; is the class of the object that was processed.</span></p><p class="c2"><span class="c0">&lt;object_key&gt; is the primary key of the object.</span></p><p class="c2"><span class="c0">For example:</span></p><p class="c2"><span class="c0">Update OK: [person] FOO12770-AFRINIC</span></p><p class="c2"><span class="c0">Failed updates are reported as:</span></p><p class="c2"><span class="c0">&lt;operation_name&gt; FAILED: [ &lt;object_type&gt; ] &lt;object_key&gt;</span></p><p class="c2"><span class="c0">followed by the text of the object with more detailed explanation of what caused the failure.</span></p><p class="c2"><span class="c0">There are several reasons why the operation may fail for the object. They are:</span></p><p class="c2"><span class="c0">* syntax error</span></p><p class="c2"><span>The submitted object is syntactically incorrect. Please consult</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A1&amp;sa=D&amp;ust=1580379329142000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/library/membership-documents/294-appendice-for-reference-manual%23A1&amp;sa=D&amp;ust=1580379329143000">Appendix A1</a></span><span class="c0">&nbsp;for the description of attributes.</span></p><p class="c2"><span class="c0">* referential integrity violation</span></p><p class="c2"><span class="c0">If an object references objects (by means of &quot;admin-c:&quot;, &quot;tech-c:&quot;, &quot;zone-c:&quot;, &quot;mnt-by:&quot;, etc. attributes) that do not exist in the database, creation or modification operations will fail. For the deletions, it is not allowed to delete an object that is referenced from any other object.</span></p><p class="c2"><span class="c0">* authorisation failure</span></p><p class="c2"><span>When authorisation checks fail, the operation fails. Please refer to section</span><span><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%2326&amp;sa=D&amp;ust=1580379329144000">&nbsp;</a></span><span class="c7"><a class="c1" href="https://www.google.com/url?q=https://www.afrinic.net/en/library/membership-documents/197-database-afrinic-database-reference-manual-%2326&amp;sa=D&amp;ust=1580379329144000">2.6 &quot;Data Protection&quot;</a></span><span class="c0">&nbsp;for more information.</span></p><h3 class="c2 c11" id="h.f4pzyyo1wwfr"><span class="c5">2.5.2 Notifications </span></h3><p class="c2"><span class="c0">There are three types of notifications:</span></p><p class="c2"><span class="c0">* normal notifications</span></p><p class="c2"><span class="c0">* forward messages</span></p><p class="c2"><span class="c0">* cross notifications.</span></p><h4 class="c2 c11" id="h.t1bm1x162nz7"><span class="c20">2.5.2.1 Normal notifications &nbsp;</span></h4><p class="c2"><span class="c0">Normal notifications are sent:</span></p><p class="c2"><span class="c0">* when an object with a &quot;notify:&quot; attribute is updated. The &quot;notify:&quot; attribute of the old version of the object is used if the object was already in the database, and the &quot;notify:&quot; attribute of the new object is used if the object is a new one.</span></p><p class="c2"><span class="c0">* when an object that is maintained (that is, it has a &quot;mnt-by:&quot; attribute) is updated, and the maintainer(s) have &quot;mnt-nfy:&quot; attributes. The e-mail boxes mentioned in the &quot;mnt-nfy:&quot; attributes of the relevant maintainers must be used.</span></p><p class="c2"><span class="c0">* When an inetnum, route or a domain object is created in a space protected by a less specific object (by &quot;mnt-lower:&quot; attribute of the object).</span></p><p class="c2"><span class="c0">* when a reference to an irt object is added to or removed from an inetnum or inet6num object (by means of &quot;mnt-irt:&quot; attribute), and the irt object contains an &quot;irt-nfy:&quot; attribute(s). The e-mail boxes mentioned in the &quot;irt-nfy:&quot; attributes are used.</span></p><h4 class="c2 c11" id="h.rb21vtptgfqv"><span class="c20">2.5.2.2 Forward messages </span></h4><p class="c2"><span class="c0">When an update fails to pass authorisation checks, that object in the update message is forwarded to the e-mail address specified in the &quot;upd-to:&quot; attribute of the relevant maintainer(s).</span></p><h4 class="c2 c11" id="h.cvexbqz8hhlt"><span class="c20">2.5.2.3 Cross notifications </span></h4><p class="c2"><span class="c0">Cross notifications are sent:</span></p><p class="c2"><span class="c0">* when a new or deleted route object overlaps with another route object. A notification will be sent to the sender of the route object.</span></p><p class="c2"><span class="c0">* When a new or deleted route object overlaps with another route object that has a &quot;cross-nfy:&quot; or &quot;cross-mnt:&quot; attribute. Notification must be sent to the &quot;mnt-nfy:&quot; attributes of the maintainers mentioned in the &quot;cross-mnt:&quot; attribute and to the &quot;e-mail:&quot; attributes of the person and role objects whose NIC handle is mentioned in the &quot;cross-nfy:&quot; attribute of the overlapping route objects.</span></p><p class="c2"><span class="c0">* When a new or deleted route object overlaps with another route object whose &quot;origin&quot; is an aut-num object that has &quot;cross-nfy:&quot; or &quot;cross-mnt:&quot; attributes. Notification must be sent to the &quot;mnt-nfy:&quot; attributes of the maintainers mentioned in the &quot;cross-mnt:&quot; attribute and to the &quot;e-mail:&quot; attributes of the person or role objects whose NIC handle is mentioned in the &quot;cross-nfy:&quot; attribute of the aut-num object.</span></p><h2 class="c2 c11" id="h.vpdfm9f3op1z"><span class="c21">2.6 Data protection &nbsp;</span></h2><p class="c2"><span class="c0">The AFRINIC Database provides mechanisms to control who can make changes in the database and what changes they can make. The distinction of &quot;who&quot; vs. &quot;what&quot; separates authentication from authorisation.</span></p><p class="c2"><span class="c0">* Authentication is the means to determine who is attempting to make a change.</span></p><p class="c2"><span class="c0">* Authorisation is the determination of whether a transaction passing a specific authentication check is allowed to perform a given operation.</span></p><p class="c2"><span class="c0">Different portions of the database require different levels of protection. Some pplications require authentication based on strong encryption. In other cases strong encryption may not be necessary or may not be legally available. For this reason, multiple authentication methods are supported by the server.</span></p><h3 class="c2 c11" id="h.tcopxpde4lyb"><span class="c5">2.6.1 Authorisation model </span></h3><p class="c2"><span class="c0">The mntner objects serve as a container to hold authentication filters. A reference to a maintainer within another object defines authorisation to perform operations on the object or on a set of related objects. Such reference is provided by means of the &quot;mnt-by:&quot;, &quot;mnt-lower:&quot;, &quot;mnt-routes:&quot; and &quot;mbrs-by-ref:&quot; attributes. The maintainer contains one or more &quot;auth:&quot; attributes. Each &quot;auth:&quot; attribute begins with a keyword identifying the authentication method followed by the authentication information needed to enforce that method.</span></p><p class="c2"><span class="c0">When submitting an update that requires authorisation from a mntner, authentication information valid for that mntner should be supplied. Different methods require different authentication information, as will be shown below.</span></p><p class="c2"><span class="c0">Authentication methods currently supported include the following:</span></p><p class="c2"><span class="c0">Method / Description</span></p><p class="c2"><span class="c0">NONE</span></p><p class="c2"><span class="c0">No authorisation checks are performed.</span></p><p class="c2"><span class="c0">MAIL-FROM*</span></p><p class="c2"><span class="c0">This is a very weak authentication check and is discouraged. The authentication information is a regular expression over ASCII characters. The maintainer is authenticated if the &quot;From:&quot; field in RFC 822 mail headers are matched by this regular expression. Since mail header forgery is quite easy, this is a very weak form of authentication.</span></p><p class="c2"><span class="c0">CRYPT-PW</span></p><p class="c2"><span class="c0">This is a relatively weak form of authentication. The authentication information is a fixed encrypted password in UNIX crypt format. The maintainer is authenticated if the transaction contains the clear text password of the maintainer. Since the password is in clear text in transactions, it can be captured by snooping. The encrypted form of the password is no longer displayed in the output of a query,in order to protect it from password guessing attacks. Authentication information is supplied using a &quot;password:&quot; pseudo-attribute. The value of this attribute is a clear-text password. It can appear anywhere in the body of the message, but not within mail headers. Line continuation is not allowed for this attribute.</span></p><p class="c2"><span class="c0">MD5-PW</span></p><p class="c2"><span class="c0">This scheme is based on the MD5 hash algorithm and provides stronger authentication than CRYPT-PW. The authentication information stored in the database is a passphrase encrypted using md5-crypt algorithm, which is a concatenation of the &quot;$1$&quot; string, the salt, and the 128-bit hash output. Because it uses 8-character salt and an almost unlimited passphrase, this scheme is more stable against dictionary attacks. The encrypted form of the password is filtered from whois query output to protect it from cracking attacks. Authentication information is supplied using a &quot;password:&quot; pseudo-attribute. The value of this attribute is a clear-text passphrase. It can appear anywhere in the body of the message, but not within mail headers. Line continuation is not allowed for this attribute, the attribute and the passphrase should fit on one line. If the key gets split across multiple lines this will be treated as a syntax error.</span></p><p class="c2"><span class="c0">PGPKEY</span></p><p class="c2"><span class="c0">Strong form of authentication. The authentication information is a signature identity pointing to a public key certificate, which is stored in a separate object. The maintainer is authenticated if the transaction is signed by the corresponding private key. AFRINIC does not guarantee that a key belongs to any specific entity; it is not a certificate authority. Anyone can supply any public keys with any ownership information to the database and these keys can be used to protect other objects by checking that the update comes from someone who knows the corresponding secret key.</span></p><p class="c2"><span class="c0">* MAIL-FROM authentication scheme is not valid in the AFRINIC Database.</span></p><h3 class="c2 c11" id="h.gyor19hrcmek"><span class="c5">2.6.2 Protection of individual objects &nbsp;</span></h3><p class="c2"><span class="c0">Individual objects can be protected with a mntner object. The mntner is referenced by the &quot;mnt-by:&quot; attribute in the object. The attribute type is multiple, so several mntners can protect the object. Only those mntners referenced by the &quot;mnt-by:&quot; attributes are authorised to modify or delete the object. Note that authentication checks are OR-ed, so if at least one mntner is authenticated, the operation is authorised. That means that object protection is as weak as the weakest authentication method used in the mntners referenced by the object. When the &quot;mnt-by:&quot; attribute is added to an object for the first time (as part of object creation or modification), the operation should pass authentication checks for the mntner(s) referenced by this attribute.</span></p><h3 class="c2 c11" id="h.9dhuw29183dy"><span class="c5">2.6.3 Protection of aut-num object space </span></h3><p class="c2"><span class="c0">Protection of aut-num object space is done using an as-block class. The mntner that authorises the creation of more specific as-block objects or aut-num objects is specified by the &quot;mnt-lower:&quot; attribute of the as-block object. When no &quot;mnt-lower:&quot; attribute is specified, the &quot;mnt-by:&quot; attribute is used.</span></p><h3 class="c2 c11" id="h.xis2qv5cmmbx"><span class="c5">2.6.4 Protection of address space </span></h3><p class="c2"><span class="c0">Address space allocations and assignments are represented by the inetnum and inet6num objects. The &quot;mnt-lower:&quot; attribute is used to reference a mntner that authorises the creation of more specific inetnum or inet6num objects. When no &quot;mnt-lower:&quot; attribute is specified, the address space is unprotected.</span></p><h3 class="c2 c11" id="h.xr6ofkxlqqzu"><span class="c5">2.6.5 Protection of objects with hierarchical names </span></h3><p class="c2"><span class="c0">Many RPSL objects do not have a natural hierarchy of their own but allow hierarchical names. Some examples are the object types as-set and route-set. An as-set may have a name corresponding to no naming hierarchy such as &quot;AS-Foo&quot; or it may have a hierarchical name of the form &quot;AS1:AS-BAR&quot;. When a hierarchical name is not used, authorisation for objects such as as-set and route-set corresponds to the rules for individual objects described in section 3.6.2 &quot;Protection of individual objects&quot;.</span></p><p class="c2 c27"><span class="c0"></span></p><p class="c2"><span class="c0">If hierarchical names are used, then the addition of an object must be authorised by the object whose key is named by everything to the left of the rightmost colon in the name of the object being added.</span></p><p class="c2"><span class="c0">Authorisation is determined by first using the &quot;mnt-lower:&quot; maintainer reference or, if absent, by using the &quot;mnt-by:&quot; reference.</span></p><h3 class="c2 c11" id="h.759kbq8h37to"><span class="c5">2.6.6 Protection of domain object space </span></h3><p class="c2"><span class="c0">Protection of the domain object space is done with the &quot;mnt-lower:&quot; attribute. When used in the domain object, this attribute references the mntner that authorises the creation of domain objects directly below in the domain tree registered in the AFRINIC Database. For example, a top-level domain object (ccTLD) protects the creation of the second-level domain objects, third-level domain objects if there is no corresponding second-level domain object, etc. Note that the top-level domain object (ccTLD or gTLD) cannot be created in the AFRINIC Database by users, only by the Database administrator.</span></p><h3 class="c2 c11" id="h.urnlxjrvls35"><span class="c5">2.6.7 Protecting membership of a set </span></h3><p class="c2"><span class="c0">When membership of a set is specified through the use of the &quot;member-of:&quot; attribute, the server checks the validity of the membership when creating or updating an object-member. This &quot;member-of:&quot; attribute can be used in the route, aut-num and inet-rtr classes. The value of the &quot;member-of:&quot; attribute identifies a set object that this object wants to be a member of.</span></p><p class="c2"><span class="c0">However, specifying &quot;member-of:&quot; is not enough. The set object must also have a &quot;mbrs-by-ref:&quot; attribute listing the maintainer of the object wanting to be a member of the set. That is, the set owner must validate the membership claim of an object with a &quot;member-of:&quot; attribute, and it does that by matching the mnt-by line of the object with one of the maintainers in the &quot;mbrs-by-ref:&quot; attribute of the set object. If the claim is not valid at the time when the server creates or modifies an object-member (route, aut-num or inet-rtr), the operation fails. If the &quot;mbrs-by-ref:&quot; attribute is missing, the set is defined explicitly by the &quot;members:&quot; attribute.</span></p><h1 class="c2 c11" id="h.djtt1e44am3z"><span class="c34">3.0 Mirroring of the AFRINIC Database </span></h1><p class="c2"><span class="c0">Near real time mirroring (NRTM) is a mechanism that enables whois servers, other than the primary for a given database, to have an up to date copy of all the data in the main server by getting modifications as they are processed by the main server.</span></p><p class="c2"><span class="c0">Periodically (defined by configuration, usually around every 15 minutes) the remote server connects to the main server and requests all the modifications that have been processed since the last connection. When all the data is retrieved the connection is closed, until it is time for a new connection.</span></p><p class="c2"><span class="c0">In AFRINIC Database the NRTM server listens on a port that is different from the whois port (43).</span></p><p class="c2"><span class="c0">The AFRINIC whois server generates a sequence number every time it processes an update in the database. For the purpose of generating this serial numbers, the server describes all modifications to the database in terms of two atomic operations: deletion and addition.</span></p><p class="c2"><span class="c0">When sending data to a mirror server, the main server will send one of two strings (ADD or DELETE) followed by two newline characters and the corresponding object (either the object as it was before deletion or the object as it should be added or modified). If the &quot;ADD&quot; string is followed by an object already existing in the database, then this operation is considered as a modification. Near real time mirroring is requested with the &quot;-g&quot; flag. The arguments to this flag are:</span></p><p class="c2"><span class="c0">-g &lt; source&gt; :&lt;NRTM_Protocol_version_#&gt;:&lt;first&gt;-&lt;last&gt;</span></p><p class="c2"><span class="c0">where</span></p><p class="c2"><span class="c0">* &lt;source&gt; is the string that identifies the Database (e.g. AFRINIC).</span></p><p class="c2"><span class="c0">* &lt;NRTM_protocol_version_#&gt; a version of the mirroring protocol that the &lt;source&gt; supports (2 for AFRINIC).</span></p><p class="c2"><span class="c0">* &lt;first&gt; is the lowest serial number requested.</span></p><p class="c2"><span class="c0">* &lt;last&gt; is the most recent serial number requested or the keyword LAST that tells the main server to send all updates up to the most recent one available at the time of the query. Note that the server will never yield the last object processed, or display that it is available for mirroring. This is done to protect secondary servers in case the last update causes database corruption and server crash.</span></p><p class="c2"><span class="c0">A client may request a persistent connection by including the &quot;-k&quot; flag with a mirroring request (&quot;-g&quot; query). In this case, the last argument is ignored and the new objects are supplied by the server as soon as they are processed. The client is responsible for closing the connection.</span></p><p class="c2"><span class="c0">The &quot;-q sources&quot; flag may be used with the mirror server to retrieve information regarding available mirroring possibilities. Please see section 2.9 &quot;Other server features&quot; for more details.</span></p><p class="c2"><span class="c0">Note that the server never returns the latest serial when serving a mirroring request. So, if the latest serial causes a server crash and database corruption, it never propagates to the secondary servers. The latest serial is not displayed with the &quot;-q sources&quot; query as well.</span></p><p class="c2"><span class="c0">At the beginning of the data stream, the main server will send the following string:</span></p><p class="c2"><span class="c0">%START Version: NRTM_Protocol_version_# source first-last</span></p><p class="c2"><span class="c0">For example: %START Version: 2 AFRINIC:1539595-1539597</span></p><p class="c2"><span class="c0">After the last piece of data is sent to the mirror server, the main server will send the string:</span></p><p class="c2"><span class="c0">%END source to signal the end of transmission.</span></p><p class="c2"><span class="c0">For example:</span></p><p class="c2"><span class="c0">%END AFRINIC</span></p><p class="c12"><span class="c0"></span></p></body></html>